---
layout: default
permalink: /submit
image: submit.jpg
---
<a class="recipe--logo absolute no-line-height top-2 left-2 z4" href="{{ site.baseurl }}/">
  {% include theSkullery-red.svg %}
  <h1 class="hide">theSkullery</h1>
</a>
{% for image in page.image %}
<div class="xs-p2">
  <img itemprop="image" src="{{site.baseurl}}/images/{{ image }}" />
  {% if page.imagecredit %}
  {% for imagecredit in page.imagecredit %}
  <a href="{{ imagecredit }}" class="right">
    <svg fill="#cfcfcf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30px" height="30px">
      <path
        d="M20,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V6C22,4.9,21.1,4,20,4z M12,17c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S14.8,17,12,17z" />
      <path d="M12 8.5A3.5 3.5 0 1 0 12 15.5 3.5 3.5 0 1 0 12 8.5zM18 5L15 2 9 2 6 5z" />
    </svg> </a>
  {% endfor %}
  {% endif %}
</div>
{% endfor %}
<div class="tagpage--header">
  <div class="tagpage--suptitle ml3 sm-mt3">Your recipes</div>
  <div class="tagpage--title ml3">Submit</div>
  <div class="tagpage--subtitle ml3 mr3">Over the years, I've tried dozens of recipe apps and services in an attempt to
    cook better and get more organized. <br>
    This website is my attempt at getting recipes organized and categorized by moving them from closed services and
    random handwritten pages to a more open, beautiful, and shareable place while having the convenience of plain-text.
    <br>
    <br>
    For example, here's <a class='squiggly--url' target="_blank" href="{{site.baseurl}}/documents/template.md">a recipe
      in plain text</a> that I've implemented on this website.<br>
    <a class='squiggly--url' href="{{site.baseurl}}/recipes/pavlova">Here's that recipe processed in
      <strong>theSkullery.net</strong>.</a>
    The magic comes behind-the-scenes, with <a class='squiggly--url' href="http://schema.org/Recipe">recipe microdata
      via schema.org</a>. This process adds special tags around each bit of content, which is what lets the
    infrastructure behind (like Jekyll) read your recipes and render them in mere seconds in the browser.<br>
    <br>
    This is <strong>definitely</strong> a work in progress. This project helped me learn and consolidate my knowledge
    with a lot of languages and apps (Jekyll, SCSS, JavaScript, Google Firebase). The website might go down from time to
    time, or break, the recipes are here to stay, though, and nothing will get lost.<br>
    <br>
    If you would like to submit your own, please download a template, fill it in and upload it below. Also, please make
    sure not to upload files with the same name as they will be overwritten.
  </div>
  <div class="downloads ml3 mr3">
    <a class="txt" href="{{site.baseurl}}/documents/template.txt" download></a>
    <a class="md" href="{{site.baseurl}}/documents/template.md" download></a>
  </div>
  <div class="form ml3 mr3">
    <form id="submitform" enctype='multipart/form-data' name="contact" method="POST" netlify-honeypot="bot-field"
      data-netlify="true">
      <label>Your Name: <input type="text" name="name" /></label>
      <label>Your Email: <input type="email" name="email" /></label>
      <label>Message: <textarea name="message"></textarea></label>
      <div class="messages"></div>
      <label for="file-upload" class="custom-file-upload mt1">
        Upload recipe
      </label>
      <span class="file-selected mt1" id="file-selected">*.txt and *.md only</span>
      <input type="file" id="file-upload" class="file-select" accept=".txt,.md">
      <button type="submit" class="file-submit mt1">Submit</button>
    </form>
  </div>
  <!-- <div class="m3" id="filesubmit">
    <div class="messages"></div>
    <label for="file-upload" class="custom-file-upload mt1">
      Upload recipe
    </label>
    <span class="file-selected mt1" id="file-selected">*.txt and *.md only</span>
    <input type="file" id="file-upload" class="file-select" accept=".txt,.md" name="file" multiple>
    <button class="file-submit mt1">Submit</button>
  </div> -->
</div>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<!-- <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-storage.js"></script> -->
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<!-- <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-analytics.js"></script> -->

<!-- <script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAg1mUVs87yOQ-VJi_o5PYq3gLWl_6Lh1Q",
    authDomain: "the-skullery.firebaseapp.com",
    databaseURL: "https://the-skullery.firebaseio.com",
    projectId: "the-skullery",
    storageBucket: "the-skullery.appspot.com",
    messagingSenderId: "849862452241",
    appId: "1:849862452241:web:d3dcad30f48eaf13437db0",
    measurementId: "G-MZLE1B6FKQ"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  const storageService = firebase.storage();
  const storageRef = storageService.ref();

  document.querySelector('.file-select').addEventListener('change', handleFileUploadChange);
  document.querySelector('.file-submit').addEventListener('click', handleFileUploadSubmit);
  let selectedFile;

  function handleFileUploadChange(e) {
    selectedFile = e.target.files[0];
  };

  function handleFileUploadSubmit(e) {
    const uploadTask = storageRef.child(`recipes/${selectedFile.name}`).put(
      selectedFile); //create a child directory called images, and place the file inside this directory
    uploadTask.on('state_changed', (snapshot) => {
      // Observe state change events such as progress, pause, and resume
    }, (error) => {
      // Handle unsuccessful uploads
      var uploadFailed =
        "<div class='failed'><span class='closebtn' onclick='this.parentElement.style.display=\"none\";'>&times;</span><strong>Upload failed.</strong> Your file was not uploaded, please make sure you are uploading only template files. For other issues please <a class='squiggly--url' href='mailto:robert@nhg.design'>send me an e-mail</a>.</div>";
      $('#filesubmit').find('.messages').html(uploadFailed);
    }, () => {
      // Do something once upload is complete
      var uploadSuccess =
        "<div class='success'><span class='closebtn' onclick='this.parentElement.style.display=\"none\";'>&times;</span><strong>Success!</strong> Your file was uploaded, which means you\'re one step away from having your recipe displayed.</div>";
      $('#filesubmit').find('.messages').html(uploadSuccess);
    });
  };
</script> -->
<script>
  $('#file-upload').bind('change', function () {
    var fileName = '';
    fileName = $(this).val().replace("C:\\fakepath\\", "");
    $('#file-selected').html(fileName);
  })
</script>
<script>
  $("#submitform").submit(function (e) {
    e.preventDefault();

    var $form = $('#submitform')[0];
    var $data = new FormData($form);

    $data.append("CustomField", "This is some extra data, testing");

    $.ajax({
      type: "POST",
      enctype: 'multipart/form-data',
      data: $data,
      processData: false,
      contentType: false,
      cache: false,
      timeout: 600000,
      success: function ($data) {

        var uploadSuccess = "<div class='success'><span class='closebtn' onclick='this.parentElement.style.display=\"none\";'>&times;</span><strong>Success!</strong> Your file was uploaded, which means you\'re one step away from having your recipe displayed.</div>";
        $('#filesubmit').find('.messages').html(uploadSuccess);
        $(".file-submit").prop("disabled", false);

      },
      error: function (e) {

        var uploadFailed = "<div class='failed'><span class='closebtn' onclick='this.parentElement.style.display=\"none\";'>&times;</span><strong>Upload failed.</strong> Your file was not uploaded, please make sure you are uploading only template files. For other issues please <a class='squiggly--url' href='mailto:robert@nhg.design'>send me an e-mail</a>.</div>";
        $('#filesubmit').find('.messages').html(uploadFailed);
        $(".file-submit").prop("disabled", false);

      }
    });
  });
</script>